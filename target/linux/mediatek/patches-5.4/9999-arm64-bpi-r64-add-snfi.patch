From: koreapyj <koreapyj@dcmys.kr>
Subject: arm64: add snfi to mt7622
Date: Sat, 08 Jan 2022 20:57:37 GMT

subject is content
---
 .../dts/mediatek/mt7622-bananapi-bpi-r64.dts  | 50 +++++++++++++++++++
 1 file changed, 50 insertions(+)

--- a/arch/arm64/boot/dts/mediatek/mt7622-bananapi-bpi-r64.dts
+++ b/arch/arm64/boot/dts/mediatek/mt7622-bananapi-bpi-r64.dts
@@ -101,7 +101,7 @@
 };
 
 &bch {
-	status = "disabled";
+	status = "okay";
 };
 
 &btif {
@@ -250,11 +250,6 @@
 	pinctrl-names = "default";
 	pinctrl-0 = <&spi_nor_pins>;
 	status = "disabled";
-
-	flash@0 {
-		compatible = "jedec,spi-nor";
-		reg = <0>;
-	};
 };
 
 &pcie0 {
@@ -514,6 +514,57 @@
        status = "okay";
 };
 
+&snfi {
+	pinctrl-names = "default";
+	pinctrl-0 = <&serial_nand_pins>;
+	status = "okay";
+
+	snand: spi_nand@0 {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		compatible = "spi-nand";
+		spi-max-frequency = <104000000>;
+		reg = <0>;
+
+		partitions {
+			compatible = "fixed-partitions";
+			#address-cells = <1>;
+			#size-cells = <1>;
+
+			partition@0 {
+				label = "bl2";
+				reg = <0x0000000 0x0060000>;
+				read-only;
+			};
+
+			partition@60000 {
+				label = "config";
+				reg = <0x0060000 0x0020000>;
+			};
+
+			partition@80000 {
+				label = "fip";
+				reg = <0x0080000 0x0200000>;
+				read-only;
+			};
+
+			partition@280000 {
+				label = "kernel";
+				reg = <0x0280000 0x0400000>;
+			};
+
+			partition@680000 {
+				label = "ubi";
+				reg = <0x0680000 0x7980000>;
+			};
+		};
+	};
+};
+
+&rtc {
+	status = "disabled";
+};
+
 &ssusb {
        vusb33-supply = <&reg_3p3v>;
        vbus-supply = <&reg_5v>;
